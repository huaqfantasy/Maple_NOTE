<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>&#x9002;&#x7528;&#x4e8e; &period;NET &#x7684; C&plus;&plus;&sol;CLI</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="é€‚ç”¨äº-net-çš„-ccli">é€‚ç”¨äº .NET çš„ C++/CLI</h1>
<p>ps: ä»Šæ—¥æ— äº‹ï¼Œå¼€å‘ï¼</p>
<h1 id="ç¯å¢ƒé…ç½®åŠç»“æ„ä»‹ç»">ç¯å¢ƒé…ç½®åŠç»“æ„ä»‹ç»</h1>
<ol>
<li>å®‰è£…å®‰è£… C++/CLI æ”¯æŒï¼šæ‰“å¼€vs installer é€‰æ‹©å®‰è£…</li>
<li>åˆ›å»ºCLR æ§åˆ¶å°åº”ç”¨ç¨‹åº(CLR æ§åˆ¶å°åº”ç”¨(.NET Framework))</li>
<li>é¡¹ç›®ç»“æ„(æºæ–‡ä»¶ã€å¤´æ–‡ä»¶ã€èµ„æºæ–‡ä»¶)</li>
</ol>
<table>
<thead>
<tr>
<th>æºæ–‡ä»¶</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ConsoleApplicationName.cpp</td>
<td>åº”ç”¨çš„ä¸»è¦æºæ–‡ä»¶å’Œå…¥å£ç‚¹ã€‚ æ­¤æ–‡ä»¶å…·æœ‰ä¸ºé¡¹ç›®æŒ‡å®šçš„åŸºåç§°ã€‚ å®ƒæ ‡è¯†é¡¹ç›® DLL æ–‡ä»¶å’Œé¡¹ç›®å‘½åç©ºé—´ã€‚ åœ¨æ­¤æ–‡ä»¶ä¸­æä¾›ä½ è‡ªå·±çš„ä»£ç </td>
</tr>
<tr>
<td>AssemblyInfo.cpp</td>
<td>åŒ…å«å¯ç”¨äºä¿®æ”¹é¡¹ç›®ç¨‹åºé›†å…ƒæ•°æ®çš„å±æ€§å’Œè®¾ç½®ã€‚</td>
</tr>
<tr>
<td>pch.cpp</td>
<td>ç”¨äºç”Ÿæˆåä¸º ConsoleApplicationName.pch çš„é¢„ç¼–è¯‘æ ‡å¤´æ–‡ä»¶å’Œåä¸º pch.obj çš„é¢„ç¼–è¯‘ç±»å‹æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>å¤´æ–‡ä»¶</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pch.h</td>
<td>ç”¨äºç”Ÿæˆåä¸º ConsoleApplicationName.pch çš„é¢„ç¼–è¯‘æ ‡å¤´æ–‡ä»¶å’Œåä¸º pch.obj çš„é¢„ç¼–è¯‘ç±»å‹æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>Resource.h</td>
<td>ä¸º app.rc ç”Ÿæˆçš„åŒ…å«æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>èµ„æºæ–‡ä»¶</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>app.rc</td>
<td>ç¨‹åºçš„èµ„æºè„šæœ¬æ–‡ä»¶</td>
</tr>
<tr>
<td>app.ico</td>
<td>ç¨‹åºçš„å›¾æ ‡æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<h2 id="ç¤ºä¾‹ç¨‹åº">ç¤ºä¾‹ç¨‹åº</h2>
<pre><code>#include &quot;pch.h&quot;

using namespace System;

ref struct City {
private:
    Int16 zip_;

public:
    City(int zip) : zip_(zip) {};
    property Int16 zip {
        Int16 get(void) {
            return zip_;
        }   // get
    }   // property
};

void passByRef(City^% myCity) {
    // cast required so this pointer in City struct is &quot;const City&quot;
    if (myCity-&gt;zip == 20100)
        Console::WriteLine(&quot;zip == 20100&quot;);
    else
        Console::WriteLine(&quot;zip != 20100&quot;);
}

ref class G {
public:
    int i;
};

void Test(int% i) {
    i++;
}

int main(array&lt;System::String ^&gt; ^args)
{
    G^ g1 = gcnew G;
    G^% g2 = g1;
    g1-&gt;i = 12;

    Test(g2-&gt;i);   // g2-&gt;i will be changed in Test2()

    City^ Milano = gcnew City(20100);
    passByRef(Milano);
    return 0;
}
</code></pre>
<h2 id="åŸºç¡€æ•°æ®ç±»å‹">åŸºç¡€æ•°æ®ç±»å‹</h2>
<ul>
<li>
<p>boolï¼šå¸ƒå°”ç±»å‹ï¼Œå¯ä»¥å­˜å‚¨ true æˆ– falseã€‚</p>
</li>
<li>
<p>charï¼šç”¨äºå­˜å‚¨å•ä¸ªå­—ç¬¦çš„ç±»å‹ã€‚</p>
</li>
<li>
<p>wchar_tï¼šç”¨äºå­˜å‚¨å®½å­—ç¬¦ï¼ˆUnicodeï¼‰çš„ç±»å‹ã€‚</p>
</li>
<li>
<p>unsigned charï¼šæ— ç¬¦å·å­—ç¬¦ç±»å‹ã€‚</p>
</li>
<li>
<p>shortï¼šçŸ­æ•´å‹ï¼Œé€šå¸¸å ç”¨ 2 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>unsigned shortï¼šæ— ç¬¦å·çŸ­æ•´å‹ï¼Œå ç”¨ 2 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>intï¼šæ•´å‹ï¼Œé€šå¸¸å ç”¨ 4 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>unsigned intï¼šæ— ç¬¦å·æ•´å‹ï¼Œå ç”¨ 4 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>long longï¼šé•¿æ•´å‹ï¼Œé€šå¸¸å ç”¨ 8 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>unsigned long longï¼šæ— ç¬¦å·é•¿æ•´å‹ï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>floatï¼šå•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œå ç”¨ 4 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>doubleï¼šåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>Decimalï¼šé«˜ç²¾åº¦å°æ•°ç±»å‹ï¼Œå ç”¨ 16 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li>
<p>IntPtrï¼šæŒ‡é’ˆç±»å‹ï¼Œç”¨äºå­˜å‚¨æŒ‡é’ˆæˆ–å¥æŸ„ã€‚</p>
</li>
<li>
<p>UIntPtrï¼šæ— ç¬¦å·æŒ‡é’ˆç±»å‹ï¼Œç”¨äºå­˜å‚¨æŒ‡é’ˆæˆ–å¥æŸ„çš„æ— ç¬¦å·è¡¨ç¤º<br>
<code>C++/CLI ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥é€šè¿‡å¸¦æœ‰â€œ^â€åç¼€çš„æ‰˜ç®¡æŒ‡é’ˆæ¥è¡¨ç¤ºï¼Œä»¥åŒºåˆ«äºéæ‰˜ç®¡çš„ C++ æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œint çš„æ‰˜ç®¡æŒ‡é’ˆç±»å‹ä¸ºâ€œint^â€;ç”¨&quot;%&quot;å®šä¹‰å¼•ç”¨</code></p>
</li>
</ul>
<h2 id="ccliä¸­çš„æŒ‡é’ˆå¼•ç”¨æ‰˜ç®¡æŒ‡é’ˆ">c++/cliä¸­çš„æŒ‡é’ˆ,å¼•ç”¨,æ‰˜ç®¡æŒ‡é’ˆ</h2>
<p>ok,ä¸Šä»£ç <br>
<strong>Swap</strong>ï¼šæˆ‘æ¥~~~</p>
<pre><code>//æŒ‡é’ˆ
void swap(int* a, int* b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
}

//å¼•ç”¨
void swap_1(int% a, int% b)
{
    int temp = a;
    a = b;
    b = temp;
}
//æ‰˜ç®¡æŒ‡é’ˆ
void swap_2(int^ a, int^ b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
}


int main()
{
    int x = 10, y = 20;
    Console::WriteLine(&quot;befor: a:{0:D} b:{1:D}&quot;, a, b);
    swap(&amp;a,&amp;b);
    Console::WriteLine(&quot;after: a:{0:D} b:{1:D}&quot;,a,b);
    return 0;
}
</code></pre>
<p>**æŒ‡é’ˆï¼ˆpointerï¼‰**æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒå­˜å‚¨å¦ä¸€ä¸ªå˜é‡çš„åœ°å€ã€‚ä½¿ç”¨æŒ‡é’ˆå¯ä»¥ç›´æ¥è®¿é—®å­˜å‚¨åœ¨è¿™ä¸ªåœ°å€ä¸Šçš„å˜é‡çš„å€¼ã€‚æŒ‡é’ˆå¯ä»¥é€šè¿‡è¿ç®—ç¬¦æ¥è¿›è¡Œè§£å¼•ç”¨ã€å–åœ°å€ã€åŠ æ³•ã€å‡æ³•ç­‰æ“ä½œã€‚æŒ‡é’ˆå¯ä»¥æŒ‡å‘ä»»ä½•ç±»å‹çš„å˜é‡ï¼ŒåŒ…æ‹¬æ‰˜ç®¡ç±»å‹å’Œéæ‰˜ç®¡ç±»å‹ã€‚</p>
<p>**æ‰˜ç®¡æŒ‡é’ˆï¼ˆmanaged pointerï¼‰**æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå®ƒç”± CLRï¼ˆå…¬å…±è¯­è¨€è¿è¡Œæ—¶ï¼‰è¿›è¡Œç®¡ç†ã€‚æ‰˜ç®¡æŒ‡é’ˆåªèƒ½æŒ‡å‘æ‰˜ç®¡ç±»å‹çš„å˜é‡ï¼ˆå¦‚ <code>String</code>ã€<code>array</code>ã€<code>class</code>ã€<code>interface</code> ç­‰ï¼‰ã€‚ä½¿ç”¨æ‰˜ç®¡æŒ‡é’ˆéœ€è¦åœ¨ç±»å‹å‰åŠ ä¸Šç¬¦å· ^ï¼Œä¾‹å¦‚ï¼š<code>int^</code>ã€<code>String^</code>ã€<code>array&lt;int&gt;^</code> ç­‰ã€‚ä¸æŒ‡é’ˆä¸åŒï¼Œæ‰˜ç®¡æŒ‡é’ˆä¸èƒ½è¿›è¡ŒæŒ‡é’ˆç®—æœ¯è¿ç®—ï¼Œä½†å¯ä»¥ä½¿ç”¨ <code>gcnew</code> è¿ç®—ç¬¦è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚</p>
<p>**å¼•ç”¨ï¼ˆreferenceï¼‰**æ˜¯å¦ä¸€ä¸ªå˜é‡çš„åˆ«åã€‚å®ƒå¯ä»¥è¢«çœ‹ä½œæ˜¯æŒ‡é’ˆçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå®ƒä¸èƒ½è¢«é‡æ–°èµ‹å€¼æŒ‡å‘å¦ä¸€ä¸ªå˜é‡ã€‚ä½¿ç”¨å¼•ç”¨å¯ä»¥åƒè®¿é—®å˜é‡ä¸€æ ·ç›´æ¥è®¿é—®å¦ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œè€Œæ— éœ€è¿›è¡Œè§£å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ*ï¼‰ã€‚å¼•ç”¨åªèƒ½å¼•ç”¨å·²ç»å­˜åœ¨çš„å˜é‡ï¼Œä¸èƒ½å¼•ç”¨ç©ºå€¼ï¼ˆnullï¼‰ã€‚</p>
<h3 id="emmæ‰˜ç®¡æŒ‡é’ˆå¥½å®¶ä¼™æ¥çœ‹çœ‹å…·ä½“æ€ä¹ˆç”¨">emmï¼Œæ‰˜ç®¡æŒ‡é’ˆï¼Œå¥½å®¶ä¼™ï¼Œæ¥çœ‹çœ‹å…·ä½“æ€ä¹ˆç”¨</h3>
<pre><code>using namespace System;

int main()
{
    // å®šä¹‰ä¸€ä¸ªæ‰˜ç®¡æ•´æ•°ç±»å‹çš„å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º 42
    int^ x = gcnew int(42);

    // ä½¿ç”¨æ‰˜ç®¡æŒ‡é’ˆè®¿é—® x çš„å€¼
    Console::WriteLine(&quot;x = {0}&quot;, *x);

    // ä½¿ç”¨æ‰˜ç®¡æŒ‡é’ˆä¿®æ”¹ x çš„å€¼
    *x = 99;
    Console::WriteLine(&quot;x = {0}&quot;, *x);

    // é‡Šæ”¾æ‰˜ç®¡æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜
    delete x;

    return 0;
}
</code></pre>
<p>æ€»ç»“ï¼šè¡¨é¢ä¸Šçœ‹èµ·æ¥å’Œnewå·®ä¸å¤šï¼Œåªæ˜¯ä½¿ç”¨æ—¶å˜æˆäº†<code>gcnew</code>å’Œ<code>delete</code>,è§£æŒ‡é’ˆçš„æ—¶å€™è¿˜æ˜¯<code>*</code></p>
<p>æœªå®Œå¾…ç»­ï¼Œä»¥ä¸Š~~~</p>
<p>å¦‚æœ‰ç–‘é—®ï¼š<br>
<a href="https://github.com/huaqfantasy/Maple_NOTE/issues">ğŸ³ <strong>issue</strong></a><br>
ğŸ“© é‚®ç®±: <code>hjf734628@gmail.com</code></p>

        
        
    </body>
    </html>